--- !ditz.rubyforge.org,2008-03-06/issue
component: ditz-gui
creation_time: 2014-10-07 18:23:55.954864 Z
desc: |
  Archive is needed to get rid of old
  ticket files for "closed" releases.
  Ditz gets slow really fast when amount of tickets
  is growing. (Ditz-gui doesn't have this problem.)

  Ditz functionality itself is simple. Select a release
  and directory where to archive. But implementation
  is fragile. Path may not exist in advance, it can
  only create one directory, ending slash must be
  given(?), etc

  It seems to copy current project.yaml and move all issues
  of the archived release to a given directory. Check that this
  is what it really does.

  Write some sort of implementation for this
  that preferably recognizes errors.
  Also would be nice if the changed files
  could be automatically added to git index
  (if such settings is enabled from settings),
  but that is an another task.
disposition: reorganized
id: 7033f6a62f0f45079b161c97b93dbdc3e61770d4
log_events:
- - 2014-10-07 18:23:56.787205 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - created
  - ''
- - 2014-10-16 21:03:14.011469 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - edited description
  - ''
- - 2015-01-20 17:22:21.977015 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - edited
  - |-
    This is also useful and should be implemented.
    Maybe even before git functionality.
- - 2015-01-21 16:35:14.141477 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - assigned to release v0.2.1 from v0.3
  - ''
- - 2015-01-22 14:58:53.674119 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    "It seems to copy current project.yaml and move all issues
    of the archived release to a given directory."
    Yes, that is exactly and only what it does.
- - 2015-01-22 15:00:52.383484 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - changed status from unstarted to in_progress
  - |-
    Last release related functionality that is still left.
    Better do it while all release stuff is still in recent
    memory. Also file system stuff relates well with checking
    Windows compatibility.
- - 2015-01-22 15:20:31.097945 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    Start by implementing functionality to move a list of files.
    That functionality obviously belongs in fileutils.
    Implement tests for it.
- - 2015-01-23 15:47:35.928171 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    Moving files and test implemented.
    A sketch implmentation (and "test script") for archiving
    releases implemented.
    Functionality is currently added to DitzControl, where
    it doesn't really belong.
    Add GUI part to make use of this functionality.
    Then think how it could be refactored.
    Or should I create a custom ArchiveModel for it?
    It doesn't feel good either as it has heavy
    dependencies to IssueModel and Config.
    But maybe that is the reason why it's the
    only sensible choice.
- - 2015-01-24 19:03:39.722876 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    ArchiveControl implemented to handle tasks related to
    the release archive. Next this should be taken into use
    in ditz-gui. A new action is needed for archiving and
    this, of course, needs a new icon. Something similar to
    what Windows uses with .zip files might be nice.
- - 2015-01-26 13:23:33.920016 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - Action for archiving a release added.
- - 2015-01-26 14:57:39.107581 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    Something like this should work for the file dialog:
    path = str(QFileDialog.getExistingDirectory(self, "Select Directory"))
    Seems legit.
- - 2015-01-30 23:26:03.573148 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - commented
  - |-
    Functionality works. Icons are still missing and some
    fine tuning is needed. The directory selection is not
    very clear and usable yet.
- - 2015-02-27 20:22:44.270676 Z
  - Markus Silvan <markus.silvan@iki.fi>
  - closed with disposition reorganized
  - |-
    Skeleton implementation has been done.
    Other parts of this task are handled in separate tickets.
references: []
release: v0.2.1
reporter: Markus Silvan <markus.silvan@iki.fi>
status: :closed
title: Archiving a release
type: :task
